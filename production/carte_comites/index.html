<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8 />
    <title>Démo Mapbox Alain Juppé</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
    <script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
    <style>
      body { margin:0; padding:0; }
      #map { position:absolute; top:0; bottom:0; width:100%; }
      .legend span {
        display:block;
        float: left;
        padding-top: 2px;
        height:20px;
        width:20%;
        font-size:9px;
        color:#808080;
        margin-right: 10px;
      }
      .legend label {
        display: block;
        text-align: left;
        padding-bottom:5px;
      }
      .search-ui {
        position:absolute;
        top:20px;
        right:20px;
        font-size: 20px;
        width: 375px;
        z-index:1000;
      }
      @media all and (max-width: 480px)  {
        .search-ui  {
          width: 60%;
        }
      }
      #comites_monde_list {
        position:absolute;
        top:60px;
        right:20px;
        font-size: 20px;
        width: 375px;
        z-index:1000;
        color:#808080;
      }
      @media all and (max-width: 480px)  {
        #comites_monde_list  {
          width: 60%;
        }
      }
    </style>
  </head>
  <body>
    <div id='legend' style='display:none;'>
      <strong>Carte des comités AJ pour la France</strong>
      <nav class='legend clearfix'>
        <span style='background:#1087bf;'></span><label>Comité Avec Juppé</label>
        <span style='background:#f86767;'></span><label>Comité Jeunes avec Juppé</label>
      </nav>
    </div>

    <div id='map'></div>
    <div>
      <input id='search' class='search-ui' placeholder='Rechercher une ville ou un code postal...' />
      <select id="comites_monde_list">
        <option value="0.600390625,47.66538735632654">...ou un comité Monde</option>
        <option value="0.600390625,47.66538735632654">FRANCE</option>
		<option value="3.0587927,36.7537703">ALGERIE</option>
		<option value="13.4053397,52.5307571">ALLEMAGNE</option>
		<option value="46.6730211,24.718029">ARABIE SAOUDITE</option>
		<option value="50.5857259,26.2259212">BARHEIN</option>
		<option value="4.4045082,50.8350348">BELGIQUE</option>
		<option value="-46.6410004,-23.5586287">BRESIL</option>
		<option value="114.9342379,4.9021345">BRUNEI</option>
		<option value="104.9308212,11.5559835">CAMBODGE</option>
		<option value="11.5102118,3.8553699">CAMEROUN</option>
		<option value="-73.5696719,45.500393">CANADA - MONTREAL</option>
		<option value="-75.6893037,45.4107768">CANADA - OTTAWA</option>
		<option value="-79.392281,43.6881352">CANADA - TORONTO</option>
		<option value="-123.1217657,49.2810307">CANADA - VANCOUVER</option>
		<option value="121.4130275,31.2028278">CHINE - SHANGHAI</option>
		<option value="33.384537,35.189834">CHYPRE</option>
		<option value="-74.0723471,4.7101568">COLOMBIE</option>
		<option value="43.2524198,-11.710058">COMORES</option>
		<option value="15.2642286,-4.280736099999999">CONGO - BRAZZAVILLE</option>
		<option value="11.8501979,-4.813501">CONGO - POINTE NOIRE</option>
		<option value="126.9882174,37.56078189999999">COREE</option>
		<option value="-4.0067756,5.3683865">COTE D'IVOIRE</option>
		<option value="31.2357116,30.0444196">EGYPTE</option>
		<option value="55.2359188,25.1170108">EMIRATS ARABES UNIS</option>
		<option value="-3.7031681,40.4163911">ESPAGNE</option>
		<option value="24.7532638,59.43480880000001">ESTONIE</option>
		<option value="-92.2871231,34.7463534">ETATS UNIS - ARKANSAS</option>
		<option value="-118.528151,34.044581">ETATS UNIS - LOS ANGELES</option>
		<option value="-91.1492426,30.4486292">ETATS UNIS - LOUISIANE</option>
		<option value="-73.9829762,40.7572352">ETATS UNIS - NEW YORK</option>
		<option value="-97.7437923,30.2693736">ETATS UNIS - TEXAS</option>
		<option value="-77.0279486,38.9061685">ETATS UNIS - WASHINGTON</option>
		<option value="24.9341386,60.16813899999999">FINLANDE</option>
		<option value="9.4459725,0.4128146">GABON</option>
		<option value="44.827096,41.7151377">GEORGIE</option>
		<option value="-13.5784012,9.641185499999999">GUINEE</option>
		<option value="8.7809365,3.7513276">GUINEE EQUATORIALE</option>
		<option value="114.014138,22.3002539">HONG KONG</option>
		<option value="57.48929580000001,-20.2626168">ILE MAURICE</option>
		<option value="79.8279287,11.9322585">INDE</option>
		<option value="106.79719,-6.2922975">INDONESIE</option>
		<option value="115.1618242,-8.658612699999999">INDONESIE - BALI</option>
		<option value="12.4967979,41.9022272">ITALIE</option>
		<option value="139.6928463,35.6550583">JAPON</option>
		<option value="35.9370279,31.9632707">JORDANIE</option>
		<option value="102.6271171,17.9738054">LAOS</option>
		<option value="24.1056334,56.9506442">LETTONIE</option>
		<option value="35.4965219,33.8892517">LIBAN</option>
		<option value="-10.7711332,6.2906181">LIBERIA</option>
		<option value="25.2780999,54.694838">LITUANIE</option>
		<option value="113.5501108,22.1995268">MACAO</option>
		<option value="101.6882493,3.1364855">MALAISIE</option>
		<option value="-7.991707399999999,12.5853394">MALI</option>
		<option value="-7.589843399999999,33.5731104">MAROC - CASABLANCA</option>
		<option value="-7.981084500000001,31.6294723">MAROC - MARRAKECH</option>
		<option value="-6.8426256,33.9673941">MAROC - RABAT</option>
		<option value="-5.8318002,35.7725867">MAROC - TANGER</option>
		<option value="-99.1771395,19.3823834">MEXIQUE</option>
		<option value="96.0836121,19.7585124">MYANMAR</option>
		<option value="-122.313091,47.6242645">OUEST AMERICAIN</option>
		<option value="4.4774856,51.9174228">PAYS-BAS</option>
		<option value="120.9885616,14.5806537">PHILIPPINES</option>
		<option value="-9.1610237,38.7259378">PORTUGAL</option>
		<option value="51.519289,25.270551">QATAR</option>
		<option value="26.094942,44.47669399999999">ROUMANIE</option>
		<option value="-0.081454,51.4982903">ROYAUME UNI</option>
		<option value="37.648098,55.7638809">RUSSIE</option>
		<option value="-17.3962788,14.7788242">SENEGAL</option>
		<option value="-13.2388059,8.4719651">SIERRA LEONE</option>
		<option value="103.8495443,1.3624598">SINGAPOUR</option>
		<option value="7.4506758,46.93916360000001">SUISSE</option>
		<option value="121.5649969,25.0358958">TAIWAN</option>
		<option value="100.5074165,13.7420453">THAILANDE</option>
		<option value="1.2313618,6.1724969">TOGO</option>
		<option value="10.1775492,36.8009408">TUNISIE</option>
		<option value="105.8341598,21.0277644">VIETNAM</option>
		<option value="44.2069109,15.3655106">YEMEN</option>
      </select>
    </div>
    <script>
    var map;
    $(document).ready(function() {
        L.mapbox.accessToken = 'pk.eyJ1IjoibWFwYm94YWp4IiwiYSI6ImNpZ3V3dDB2czAwMzl2Zmtyb2JubXJyZGcifQ.lvgfI_Yjd5PRRoi2HB3GQQ';
        // Create a map in the div #map
        map = L.mapbox.map('map', 'mapboxajx.a6594fec', {maxZoom: 14}).setView([47.66538735632654, 0.600390625], 5).on('ready', function() { map.maxZoom = 14; });
        var featureLayerAJ = L.mapbox.featureLayer()
                            .loadURL('comites_aj.json')
                            .addTo(map);
        var featureLayerJAJ = L.mapbox.featureLayer()
                            .loadURL('comites_jaj.json')
                            .addTo(map);
        var featureLayerAJMonde = L.mapbox.featureLayer()
                            .loadURL('comites_ajmonde.json')
                            .addTo(map);
        map.legendControl.addLegend(document.getElementById('legend').innerHTML);
        $('#search').keyup(search);

        function search() {
            var searchString = $('#search').val().toLowerCase();

            featureLayerJAJ.setFilter(showState);
            featureLayerAJ.setFilter(showState);
            featureLayerAJMonde.setFilter(showState);

            function showState(feature) {
                return feature.properties.description
                    .toLowerCase()
                    .indexOf(searchString) !== -1;
            }
        }
        $('#comites_monde_list').on('change', function() {
          lng = $(this).val().split(',')[0];
          lat = $(this).val().split(',')[1];
          map.setView([lat,lng], 5);
        });
      });
      </script>
  </body>
</html>
